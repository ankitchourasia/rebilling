<div class="card rounded-0">
    <div class="card-header bg-secondary text-white text-center">
        Plant Create
    </div>
    <form class="card-body" #f="ngForm">
        <div class="row gx-5 gy-3 justify-content-around">
            <div class="col-3 mx-3">
                <label class="fw-bold">Plant Name</label>
                <input type="text" class="form-control" [(ngModel)]="plant.plantName" name="plantName" #plantName="ngModel" required
                [ngClass]="{'is-invalid': plantName.errors && (plantName.dirty || plantName.touched)}">
                <div class="invalid-feedback" *ngIf="plantName.errors && (plantName.dirty || plantName.touched)">
                    <div *ngIf="plantName.errors['required']">required field</div>
                </div>
            </div>

            <div class="col-3 mx-3">
                <label class="fw-bold">Plant Code</label>
                <input type="text" class="form-control" [(ngModel)]="plant.plantCode" name="plantCode" #plantCode="ngModel" required
                [ngClass]="{'is-invalid': plantCode.errors && (plantCode.dirty || plantCode.touched)}">
                <div class="invalid-feedback" *ngIf="plantCode.errors && (plantCode.dirty || plantCode.touched)">
                    <div *ngIf="plantCode.errors['required']">required field</div>
                </div>
            </div>
            <div class="col-3 mx-3">
                <label class="fw-bold">Address</label>
                <input type="text" class="form-control" [(ngModel)]="plant.address" name="address" #address="ngModel" required
                [ngClass]="{'is-invalid': address.errors && (address.dirty || address.touched)}">
                <div class="invalid-feedback" *ngIf="address.errors && (address.dirty || address.touched)">
                    <div *ngIf="address.errors['required']">required field</div>
                </div>
            </div>

            <div class="col-3 mx-3">
                <label class="fw-bold">Contact No</label>
                <input type="text" class="form-control" [(ngModel)]="plant.contactNo" name="contactNo" #contactNo="ngModel" size="10" maxlength="10" pattern="[6-9][0-9]{9}" required
                [ngClass]="{'is-invalid': contactNo.errors && (contactNo.dirty || contactNo.touched)}">
                <div class="invalid-feedback" *ngIf="contactNo.errors && (contactNo.dirty || contactNo.touched)">
                    <div *ngIf="contactNo.errors['required']">required field</div>
                </div>
            </div>

            <div class="col-3 mx-3">
                <label class="fw-bold">Contact Person</label>
                <input type="text" class="form-control" [(ngModel)]="plant.contactPerson" name="contactPerson" #contactPerson="ngModel" required
                [ngClass]="{'is-invalid': contactPerson.errors && (contactPerson.dirty || contactPerson.touched)}">
                <div class="invalid-feedback" *ngIf="contactPerson.errors && (contactPerson.dirty || contactPerson.touched)">
                    <div *ngIf="contactPerson.errors['required']">required field</div>
                </div>
            </div>

            <div class="col-3 mx-3">
                <label class="fw-bold">Email</label>
                <input type="text" class="form-control" [(ngModel)]="plant.email" name="email" #email="ngModel" required
                [ngClass]="{'is-invalid': email.errors && (email.dirty || email.touched)}">
                <div class="invalid-feedback" *ngIf="email.errors && (email.dirty || email.touched)">
                    <div *ngIf="email.errors['required']">required field</div>
                </div>
            </div>
            <div class="col-3 mx-3">
                <label class="fw-bold">Commissioned Date</label>
                <input type="date" class="form-control" [(ngModel)]="plant.commissionedDate" #commissionedDate="ngModel" name="installDate" max="{{d | date : 'yyyy-MM-dd'}}" required
                [ngClass]="{'is-invalid': commissionedDate.errors && (commissionedDate.dirty || commissionedDate.touched)}">
                <div class="invalid-feedback" *ngIf="commissionedDate.errors && (commissionedDate.dirty || commissionedDate.touched)">
                    <div *ngIf="commissionedDate.errors['required']">required field</div>
                    <div *ngIf="commissionedDate.errors['max']"> can not be more than {{commissionedDate.errors['max'].max | date : 'dd-MM-yyyy'}} </div>
                </div>
            </div>
            <div class="col-3 mx-3">
                <label class="fw-bold">Type</label>
                <select class="form-select" name="type" [(ngModel)]="plant.type" #type="ngModel"
                    [ngClass]="{'is-invalid': type.errors && (type.dirty || type.touched)}" required>
                    <option disabled selected [ngValue]=undefined>Select</option>
                    <option>WIND</option>
                    <option>SOLAR</option>
                    <option>BIO</option>
                </select>
            </div>
            <div class="col-3 mx-3"></div>
            <div class="col-3 mx-3">
                <label class="fw-bold">Region</label>
                <select class="form-select" name="region" [(ngModel)]="regionName" (change)="getCircleByRegionName()" required>
                    <option disabled selected [ngValue]=undefined>Select</option>
                    <option *ngFor="let region of regions" [ngValue]="region">{{region}}</option>
                </select>
            </div>
            <div class="col-3 mx-3">
                <label class="fw-bold">Cicle</label>
                <select class="form-select" name="circle" [(ngModel)]="circleName" (change)="getDivisionByCircleName()" required>
                    <option disabled selected [ngValue]=undefined>Select</option>
                    <option *ngFor="let circle of circles" [ngValue]="circle">{{circle}}</option>
                </select>
            </div>
            <div class="col-3 mx-3">
                <label class="fw-bold">Division</label>
                <select class="form-select" name="division" [(ngModel)]="plant.location" required>
                    <option disabled selected [ngValue]=undefined>Select</option>
                    <option *ngFor="let location of locations" [ngValue]="location">{{location.divisionName}}</option>
                </select>
            </div>
            <!-- <div class="col-3 mx-3">
                <label class="fw-bold">Circle</label>
                <input class="form-control" type="text" name="circle" [ngModel]="plant?.location?.circleName" readonly>
            </div> -->
        </div>
        <div class="d-flex justify-content-center mt-4 pt-4 border-top">
            <button class="btn btn-primary me-2" (click)="onSubmit(f)" [disabled]="f.form.invalid || f.form.disabled || loading">Submit</button>
            <button type="reset" class="btn btn-warning ms-2">Reset</button>
        </div>
    </form>
</div>